{"ast":null,"code":"var _jsxFileName = \"/Users/camilarendic/Desktop/Capstone/Repositorios/2021-2-S3-Grupo3-Web/src/components/Header.js\";\nimport { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport { closeAll, getUserData, logout, setVisibility, toggleVisibility } from \"../actions\";\nimport { ROUTES, USER_TYPE } from \"../constants\";\nimport { Button } from \"./Button\";\nimport { ReactComponent as RedicoLogo } from \"@svgr/webpack?-svgo,+titleProp,+ref!./Icons/isotipo_redico.svg\";\nimport './styles/Header.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.UserReducer.currentUser\n  };\n};\n\nconst initialState = {\n  userOptionsIsActive: false\n};\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n    this.state = initialState;\n    this.toggleUserOptions = this.toggleUserOptions.bind(this);\n    this.setUserOptions = this.setUserOptions.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.logout = this.logout.bind(this);\n    this.goTo = this.goTo.bind(this);\n  }\n\n  componentDidMount() {\n    if (!this.props.currentUser) {\n      this.props.dispatch(getUserData());\n    }\n\n    document.addEventListener(\"mouseup\", this.handleMouseUp);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mouseup\", this.handleMouseUp);\n  }\n\n  goTo(routeName) {\n    this.setUserOptions(false);\n\n    if (this.props.location.pathname === routeName) {\n      return;\n    }\n\n    this.props.history.push(routeName);\n    this.props.dispatch(closeAll(true));\n    this.props.dispatch(setVisibility(false));\n  }\n\n  logout() {\n    this.props.dispatch(logout()).then(() => {\n      this.goTo(ROUTES.HOME);\n    });\n  }\n\n  handleMouseUp(event) {\n    if (typeof event.target.className === 'string' && !event.target.className.includes('header-mouse-up')) {\n      this.setUserOptions(false);\n    }\n  }\n\n  toggleUserOptions() {\n    this.setState({ ...this.state,\n      userOptionsIsActive: !this.state.userOptionsIsActive\n    });\n  }\n\n  setUserOptions(visibility) {\n    this.setState({ ...this.state,\n      userOptionsIsActive: visibility\n    });\n  }\n\n  render() {\n    if (!this.props.currentUser) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-logo\",\n        onClick: () => {\n          this.props.dispatch(toggleVisibility());\n        },\n        children: /*#__PURE__*/_jsxDEV(RedicoLogo, {\n          fill: \"current\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"header-title\",\n        children: \"RVIP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-user-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-user-name\",\n            children: this.props.currentUser ? this.props.currentUser.username : \"User Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-user-type\",\n            children: this.props.currentUser ? USER_TYPE[this.props.currentUser.orgUser.type] : \"User Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-user-options-button\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"vertical-button header-mouse-up\",\n          onClick: () => this.toggleUserOptions(),\n          children: \"...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `header-user-options header-mouse-up ${this.state.userOptionsIsActive ? 'active' : 'hidden'}` // onBlur={()=>{this.setUserOptions(false)}}\n          ,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \"button-vertical header-mouse-up\",\n            onClick: () => this.goTo(ROUTES.MY_ACCOUNT),\n            children: \"My Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"button-vertical header-mouse-up\",\n            onClick: this.logout,\n            children: \"Log out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst ConnectedHeader = connect(mapStateToProps)(Header);\nconst HeaderWithRouter = withRouter(ConnectedHeader);\n_c = HeaderWithRouter;\nexport { HeaderWithRouter as Header };\n\nvar _c;\n\n$RefreshReg$(_c, \"HeaderWithRouter\");","map":{"version":3,"sources":["/Users/camilarendic/Desktop/Capstone/Repositorios/2021-2-S3-Grupo3-Web/src/components/Header.js"],"names":["Component","connect","withRouter","closeAll","getUserData","logout","setVisibility","toggleVisibility","ROUTES","USER_TYPE","Button","mapStateToProps","state","currentUser","UserReducer","initialState","userOptionsIsActive","Header","constructor","props","toggleUserOptions","bind","setUserOptions","handleMouseUp","goTo","componentDidMount","dispatch","document","addEventListener","componentWillUnmount","removeEventListener","routeName","location","pathname","history","push","then","HOME","event","target","className","includes","setState","visibility","render","username","orgUser","type","MY_ACCOUNT","ConnectedHeader","HeaderWithRouter"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport { closeAll, getUserData, logout, setVisibility, toggleVisibility } from \"../actions\";\nimport { ROUTES, USER_TYPE } from \"../constants\";\nimport { Button } from \"./Button\";\n\nimport {ReactComponent as RedicoLogo } from './Icons/isotipo_redico.svg';\n\nimport './styles/Header.css';\n\nconst mapStateToProps = state => {\n    return {\n        currentUser: state.UserReducer.currentUser,\n    };\n};\n\nconst initialState = {\n    userOptionsIsActive: false\n}\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n        this.state = initialState;\n\n        this.toggleUserOptions = this.toggleUserOptions.bind(this);\n        this.setUserOptions = this.setUserOptions.bind(this);\n        this.handleMouseUp = this.handleMouseUp.bind(this);\n        this.logout = this.logout.bind(this);\n        this.goTo = this.goTo.bind(this);\n    }\n\n    componentDidMount() {\n        if (!this.props.currentUser) {\n            this.props.dispatch(getUserData());\n        }\n        document.addEventListener(\"mouseup\", this.handleMouseUp);\n    }\n    \n    componentWillUnmount() {\n        document.removeEventListener(\"mouseup\", this.handleMouseUp)\n    }\n\n    goTo(routeName) {\n        this.setUserOptions(false);\n        if (this.props.location.pathname === routeName) {\n            return;\n        }\n        this.props.history.push(routeName);\n        this.props.dispatch(closeAll(true));\n        this.props.dispatch(setVisibility(false));\n    }\n\n    logout() {\n        this.props.dispatch(logout()).then(()=>{\n            this.goTo(ROUTES.HOME);\n        })\n    }\n\n    handleMouseUp(event) {\n        if (typeof event.target.className === 'string' && ! event.target.className.includes('header-mouse-up')) {\n            this.setUserOptions(false);\n        }\n    }\n\n    toggleUserOptions() {\n        this.setState({...this.state, userOptionsIsActive: !this.state.userOptionsIsActive});\n    }\n\n    setUserOptions(visibility) {\n        this.setState({...this.state, userOptionsIsActive: visibility});\n        \n    }\n\n    render() {\n        if (!this.props.currentUser) {\n            return(<div/>);\n        }\n\n        return(\n            <div className='header'>\n                <div className='header-logo' onClick={()=>{this.props.dispatch(toggleVisibility())}}>\n                    <RedicoLogo fill='current'/>\n                </div>\n                <h1 className='header-title'>\n                    RVIP\n                </h1>\n                <div className='header-user-info'>\n                    <div className='header-user-icon'></div>\n                    <div>\n                        <div className='header-user-name'>\n                            {this.props.currentUser? this.props.currentUser.username : \"User Name\"}\n                        </div>\n                        <div className='header-user-type'>\n                            {this.props.currentUser? USER_TYPE[this.props.currentUser.orgUser.type] : \"User Type\"}\n                        </div>\n                    </div>\n                </div>\n                <div className='header-user-options-button'>\n                    <Button className='vertical-button header-mouse-up' onClick={()=>this.toggleUserOptions()} >\n                        ...\n                    </Button>\n                    <div \n                            className={`header-user-options header-mouse-up ${this.state.userOptionsIsActive? 'active' : 'hidden'}`}\n                            // onBlur={()=>{this.setUserOptions(false)}}\n                            >\n                        <Button className='button-vertical header-mouse-up'  onClick={()=> this.goTo(ROUTES.MY_ACCOUNT)}>\n                            My Account\n                        </Button>\n                        <Button className='button-vertical header-mouse-up'  onClick={this.logout}>\n                            Log out\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst ConnectedHeader = connect(mapStateToProps)(Header);\n\nconst HeaderWithRouter = withRouter(ConnectedHeader);\n\nexport {HeaderWithRouter as Header};"]},"metadata":{},"sourceType":"module"}