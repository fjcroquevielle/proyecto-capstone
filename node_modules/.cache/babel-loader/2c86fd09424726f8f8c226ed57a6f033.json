{"ast":null,"code":"var _jsxFileName = \"/Users/camilarendic/Desktop/Capstone/Repositorios/2021-2-S3-Grupo3-Web/src/components/ProjectList.js\";\nimport { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport { SidePanel } from \".\";\nimport { closeAll, getProjects, getProjectsAssigned, getUsers, selectProject, setProjectModal } from \"../actions/\";\nimport { PARAMS, ROUTES, USER_TYPE } from \"../constants\";\nimport { Button } from \"./Button\";\nimport { ListItem } from \"./ListItem\";\nimport { NewProjectModal } from \"./modals\";\nimport \"./styles/List.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.UserReducer.currentUser,\n    projects: state.ProjectReducer.projects,\n    users: state.UserReducer.indexedUsers\n  };\n};\n\nclass ProjectList extends Component {\n  constructor(props) {\n    super(props);\n    this.renderContent = this.renderContent.bind(this);\n    this.SetProjectList = this.SetProjectList.bind(this);\n    this.openModal = this.openModal.bind(this);\n    this.renderOpenModalButton = this.renderOpenModalButton.bind(this);\n  }\n\n  componentDidMount() {\n    this.SetProjectList();\n  }\n\n  SetProjectList() {\n    if (this.props.targetUser) {\n      this.props.dispatch(getProjectsAssigned(this.props.targetUser.id));\n      return;\n    }\n\n    this.props.dispatch(getProjects());\n\n    if (Object.keys(this.props.users).length === 0) {\n      this.props.dispatch(getUsers());\n    }\n  }\n\n  openModal() {\n    this.props.dispatch(setProjectModal(true));\n  }\n\n  goToProject(projectIndex) {\n    this.props.dispatch(selectProject(projectIndex)).then(() => {\n      this.props.history.push(ROUTES.PROJECT_PAGE.replace(PARAMS.PROJECT_ID, this.props.projects[projectIndex].id));\n      this.props.dispatch(closeAll(true));\n    });\n  }\n\n  renderContent() {\n    var {\n      users\n    } = this.props;\n    {\n      /* var {  proyects, users } = this.props; */\n    }\n    let projects = [{\n      name: \"Pedro\",\n      MantainerId: 2,\n      createdAt: new Date().toString(),\n      description: \"Proyecto 1\"\n    }, {\n      name: \"Pedro\",\n      MantainerId: 4,\n      createdAt: new Date().toString(),\n      description: \"Proyecto 1\"\n    }, {\n      name: \"Pedro\",\n      MantainerId: 4,\n      createdAt: new Date().toString(),\n      description: \"Proyecto 1\"\n    }, {\n      name: \"Pedro\",\n      MantainerId: 7,\n      createdAt: new Date().toString(),\n      description: \"Proyecto 1\"\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"view-projects-list\",\n        children: [/*#__PURE__*/_jsxDEV(SidePanel, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"view-projects-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"link_home\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"\",\n                children: \"Inicio \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 24\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"  \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 51\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"   /Proyectos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 61\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"list-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: this.props.targetUser ? `Projects Assigned to ${this.props.targetUser.username}` : \"Projects\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"left-line\",\n              children: [\"Total Projects: \", this.props.projects.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }, this), projects && projects.length > 0 && projects.map((project, index) => {\n            var _users$project$Mantai;\n\n            return /*#__PURE__*/_jsxDEV(ListItem, {\n              className: \"project\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"project-logo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"project-data\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"project-name\",\n                  children: project.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"project-context\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \" Created At: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 41\n                    }, this), \" \", project.createdAt]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 37\n                  }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \" Admin:  \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 41\n                    }, this), \" \", (_users$project$Mantai = users[project.MantainerId]) === null || _users$project$Mantai === void 0 ? void 0 : _users$project$Mantai.username]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"project-description\",\n                  children: project.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                className: \"move-right\",\n                onClick: () => {\n                  this.goToProject(index);\n                },\n                children: \"\\u25B6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 29\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 25\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n  }\n\n  renderOpenModalButton() {\n    // prevent the current user from opening this modal if the circunstances don't allow it\n    if (!this.props.currentUser || this.props.currentUser.orgUser.type !== USER_TYPE.ADMIN || this.props.targetUser) {\n      return;\n    }\n\n    return /*#__PURE__*/_jsxDEV(Button, {\n      className: \"list-button move-right\",\n      onClick: this.openModal,\n      children: \"+ Add Project\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: this.props.targetUser ? `Projects Assigned to ${this.props.targetUser.username}` : \"Projects\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"left-line\",\n          children: [\"Total Projects: \", this.props.projects.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this), this.renderOpenModalButton()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), this.renderContent(), /*#__PURE__*/_jsxDEV(NewProjectModal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst ConnectedProjectList = connect(mapStateToProps)(ProjectList);\nconst ProjectListWithRouter = withRouter(ConnectedProjectList);\n_c = ProjectListWithRouter;\nexport { ProjectListWithRouter as ProjectList };\n\nvar _c;\n\n$RefreshReg$(_c, \"ProjectListWithRouter\");","map":{"version":3,"sources":["/Users/camilarendic/Desktop/Capstone/Repositorios/2021-2-S3-Grupo3-Web/src/components/ProjectList.js"],"names":["Component","connect","withRouter","SidePanel","closeAll","getProjects","getProjectsAssigned","getUsers","selectProject","setProjectModal","PARAMS","ROUTES","USER_TYPE","Button","ListItem","NewProjectModal","mapStateToProps","state","currentUser","UserReducer","projects","ProjectReducer","users","indexedUsers","ProjectList","constructor","props","renderContent","bind","SetProjectList","openModal","renderOpenModalButton","componentDidMount","targetUser","dispatch","id","Object","keys","length","goToProject","projectIndex","then","history","push","PROJECT_PAGE","replace","PROJECT_ID","name","MantainerId","createdAt","Date","toString","description","username","map","project","index","orgUser","type","ADMIN","render","ConnectedProjectList","ProjectListWithRouter"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport { SidePanel } from \".\";\nimport { closeAll, getProjects, getProjectsAssigned, getUsers, selectProject, setProjectModal } from \"../actions/\";\nimport { PARAMS, ROUTES, USER_TYPE } from \"../constants\";\nimport { Button } from \"./Button\";\nimport { ListItem } from \"./ListItem\";\nimport { NewProjectModal } from \"./modals\";\nimport \"./styles/List.css\";\n\nconst mapStateToProps = state => {\n    return { \n        currentUser: state.UserReducer.currentUser, \n        projects: state.ProjectReducer.projects,\n        users: state.UserReducer.indexedUsers\n    };\n};\n  \n\nclass ProjectList extends Component{\n\n    constructor(props) {\n        super(props);\n        \n        this.renderContent = this.renderContent.bind(this);\n        this.SetProjectList = this.SetProjectList.bind(this);\n        this.openModal = this.openModal.bind(this);\n        this.renderOpenModalButton = this.renderOpenModalButton.bind(this);\n    }\n    \n    componentDidMount() {\n        this.SetProjectList()\n    }\n    \n    SetProjectList() {\n        if (this.props.targetUser) {\n            this.props.dispatch(getProjectsAssigned(this.props.targetUser.id));\n            return;\n        }\n        this.props.dispatch(getProjects());\n        if (Object.keys(this.props.users).length === 0) {\n            this.props.dispatch(getUsers());\n        }\n    }\n\n    openModal() {\n        this.props.dispatch(setProjectModal(true));\n    }\n\n    goToProject(projectIndex) {\n        this.props.dispatch(selectProject(projectIndex)).then(()=>{\n            this.props.history.push(ROUTES.PROJECT_PAGE.replace(PARAMS.PROJECT_ID, this.props.projects[projectIndex].id));\n            this.props.dispatch(closeAll(true));\n        });\n    }\n\n    renderContent() {\n        var {  users } = this.props; {/* var {  proyects, users } = this.props; */}\n        let projects = [\n            {\n                name: \"Pedro\",\n                MantainerId: 2,\n                createdAt: new Date().toString(),\n                description: \"Proyecto 1\"\n            },\n            {\n                name: \"Pedro\",\n                MantainerId: 4,\n                createdAt: new Date().toString(),\n                description: \"Proyecto 1\"\n            },\n            {\n                name: \"Pedro\",\n                MantainerId: 4,\n                createdAt: new Date().toString(),\n                description: \"Proyecto 1\"\n            },\n            {\n                name: \"Pedro\",\n                MantainerId: 7,\n                createdAt: new Date().toString(),\n                description: \"Proyecto 1\"\n            }\n\n        ]\n        return(\n            <div className=\"list-content\">\n                <div id=\"view-projects-list\">\n                <SidePanel/>\n                <div id=\"view-projects-row\">\n                <div id=\"link_home\">\n                   <p> <a href=\"\">Inicio </a> </p><p>  </p> <p>   /Proyectos</p> \n                </div>\n                    <div className=\"list-header\">\n                        <h3>\n                            {this.props.targetUser? `Projects Assigned to ${this.props.targetUser.username}`: \"Projects\"}\n                        </h3>\n                        <span className='left-line'>\n                            Total Projects: {this.props.projects.length}\n                        </span>\n                    </div>\n                {\n                    projects &&\n                    projects.length > 0 &&\n                    projects.map((project, index) => (\n                        <ListItem key={index} className='project' >\n                            <div className='project-logo'>\n\n                            </div>\n                            <div className='project-data'>\n                                <div className='project-name'>\n                                    {project.name}\n                                </div>\n                                <div className='project-context'>\n                                    <span>\n                                        <b> Created At: </b> {project.createdAt}{/* ?.split('T')[0] */} \n                                    </span>\n                                    &nbsp;\n                                    <span>\n                                        <b> Admin:  </b> {users[project.MantainerId]?.username}\n                                    </span>\n                                </div>\n                                <div className='project-description'>\n                                    {project.description}\n\n                                </div>\n\n                            </div>\n                            <Button className='move-right' onClick={()=>{this.goToProject(index)}}>\n                                ▶\n                            </Button>\n                        </ListItem>\n                        )\n                    )\n                }\n                </div>\n                </div>\n            </div>\n        )\n    }\n\n    renderOpenModalButton() {\n        // prevent the current user from opening this modal if the circunstances don't allow it\n        if (!this.props.currentUser || this.props.currentUser.orgUser.type !== USER_TYPE.ADMIN || this.props.targetUser) {\n            return;\n        }\n        return(\n            <Button className='list-button move-right' onClick={this.openModal}>\n                + Add Project\n            </Button>\n        )\n    }\n    \n    render(){\n        return(\n            <div className='list-container'>\n                <div className=\"list-header\">\n                    <h3>\n                        {this.props.targetUser? `Projects Assigned to ${this.props.targetUser.username}`: \"Projects\"}\n                    </h3>\n                    <span className='left-line'>\n                        Total Projects: {this.props.projects.length}\n                    </span>\n                    {this.renderOpenModalButton()}\n                </div>\n                {this.renderContent()}\n                <NewProjectModal/>\n            </div>\n        )\n    }\n}\n\nconst ConnectedProjectList = connect(mapStateToProps)(ProjectList);\n\nconst ProjectListWithRouter = withRouter(ConnectedProjectList);\n\nexport {ProjectListWithRouter as ProjectList};"]},"metadata":{},"sourceType":"module"}