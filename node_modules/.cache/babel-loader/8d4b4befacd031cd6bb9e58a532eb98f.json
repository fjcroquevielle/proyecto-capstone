{"ast":null,"code":"var _jsxFileName = \"/Users/camilarendic/Desktop/Capstone/Repositorios/2021-2-S3-Grupo3-Web/src/routes/Project.js\";\nimport { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport { getProject } from \"../actions\";\nimport { Button } from \"../components\";\nimport { PlaceHolderIcon } from \"../components/Icons/PlaceholderIcon\";\nimport { Links } from \"../components/Links\";\nimport { PARAMS, ROUTES } from \"../constants\";\nimport \"./styles/Redico.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst mapStateToProps = state => {\n  return {\n    selectedProject: state.ProjectReducer.selectedProject,\n    selectedUser: state.UserReducer.selectedUser\n  };\n};\n\nconst VIEW_MODES = {\n  VIEW_3D: \"3d-views\",\n  MEETINGS: \"meetings\",\n  MARKERS: \"markers\"\n};\nconst initialState = {\n  viewMode: VIEW_MODES.VIEW_3D\n};\n\nclass Project extends Component {\n  constructor(props) {\n    super(props);\n    this.state = initialState;\n  }\n\n  checkViewMode(viewMode) {\n    if (!viewMode) {\n      return VIEW_MODES.VIEW_3D;\n    }\n\n    var valid = false;\n    Object.keys(VIEW_MODES).some(key => {\n      valid = VIEW_MODES[key] === viewMode;\n      return valid;\n    });\n    return valid ? viewMode : VIEW_MODES.VIEW_3D;\n  }\n\n  ProjectSetup() {\n    const {\n      selectedProject,\n      selectedUser\n    } = this.props;\n    var {\n      projectId\n    } = this.props.match.params;\n    projectId = parseInt(projectId);\n\n    if (!selectedProject || selectedProject.id !== projectId) {\n      this.props.dispatch(getProject(projectId));\n    }\n\n    if (selectedProject && (!selectedUser || selectedUser.id !== selectedProject.MantainerId)) {// to-do: get mantainers\n      // this.props.dispatch(getUser(selectedProject.MantainerId))\n    }\n  }\n\n  componentDidMount() {\n    var {\n      projectView\n    } = this.props.match.params;\n    this.setView(this.checkViewMode(projectView));\n    this.ProjectSetup();\n  }\n\n  componentDidUpdate() {\n    this.ProjectSetup();\n  }\n\n  setView(view) {\n    if (view === this.state.viewMode) {\n      return;\n    }\n\n    var {\n      projectId\n    } = this.props.match.params;\n    var newRoute = ROUTES.PROJECT_PAGE_VIEW;\n    newRoute = newRoute.replace(PARAMS.PROJECT_ID, projectId);\n    newRoute = newRoute.replace(PARAMS.PROJECT_VIEW, view);\n    this.props.history.replace(newRoute);\n    this.setState({ ...this.state,\n      viewMode: view\n    });\n  }\n\n  renderView() {\n    switch (this.state.viewMode) {\n      case VIEW_MODES.MARKERS:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Markers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 24\n        }, this);\n\n      case VIEW_MODES.MEETINGS:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Meetings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 24\n        }, this);\n\n      case VIEW_MODES.VIEW_3D:\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"View 3D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 24\n        }, this);\n    }\n  }\n\n  render() {\n    var _selectedProject$crea;\n\n    const {\n      selectedProject,\n      selectedUser\n    } = this.props;\n    const {\n      projectId\n    } = this.props.match.params;\n    const projectName = selectedProject ? selectedProject.name : `Project ${projectId}`;\n    const creationDate = selectedProject ? (_selectedProject$crea = selectedProject.createdAt) === null || _selectedProject$crea === void 0 ? void 0 : _selectedProject$crea.split('T')[0] : 'yyyy-mm-dd';\n    const adminName = selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username;\n    const links = [{\n      link: ROUTES.PROJECTS,\n      name: 'Projects'\n    }, {\n      link: '#',\n      name: projectName\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(Links, {\n        links: links\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"project-page\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"project-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"project-logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"project-data\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"project-name\",\n              children: projectName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"project-context\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \" Created At: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 37\n                }, this), \" \", creationDate]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \" Admin:  \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 37\n                }, this), \" \", adminName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"project-description\",\n              children: selectedProject === null || selectedProject === void 0 ? void 0 : selectedProject.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"move-right\",\n            children: \"...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"project-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-side-panel\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: `${this.state.viewMode === VIEW_MODES.VIEW_3D ? 'selected' : ''}`,\n              tooltip: \"3D Views\",\n              onClick: () => {\n                this.setView(VIEW_MODES.VIEW_3D);\n              },\n              children: /*#__PURE__*/_jsxDEV(PlaceHolderIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: `${this.state.viewMode === VIEW_MODES.MEETINGS ? 'selected' : ''}`,\n              tooltip: \"Meetings\",\n              onClick: () => {\n                this.setView(VIEW_MODES.MEETINGS);\n              },\n              children: /*#__PURE__*/_jsxDEV(PlaceHolderIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: `${this.state.viewMode === VIEW_MODES.MARKERS ? 'selected' : ''}`,\n              tooltip: \"Markers\",\n              onClick: () => {\n                this.setView(VIEW_MODES.MARKERS);\n              },\n              children: /*#__PURE__*/_jsxDEV(PlaceHolderIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"move-to-bottom\",\n              tooltip: \"back\",\n              tooltipPosition: \"top\",\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u25C2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this), this.renderView()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst ConnectedProject = connect(mapStateToProps)(Project);\nconst ProjectWithRouter = withRouter(ConnectedProject);\n_c = ProjectWithRouter;\nexport { ProjectWithRouter as Project };\n\nvar _c;\n\n$RefreshReg$(_c, \"ProjectWithRouter\");","map":{"version":3,"sources":["/Users/camilarendic/Desktop/Capstone/Repositorios/2021-2-S3-Grupo3-Web/src/routes/Project.js"],"names":["Component","connect","withRouter","getProject","Button","PlaceHolderIcon","Links","PARAMS","ROUTES","mapStateToProps","state","selectedProject","ProjectReducer","selectedUser","UserReducer","VIEW_MODES","VIEW_3D","MEETINGS","MARKERS","initialState","viewMode","Project","constructor","props","checkViewMode","valid","Object","keys","some","key","ProjectSetup","projectId","match","params","parseInt","id","dispatch","MantainerId","componentDidMount","projectView","setView","componentDidUpdate","view","newRoute","PROJECT_PAGE_VIEW","replace","PROJECT_ID","PROJECT_VIEW","history","setState","renderView","render","projectName","name","creationDate","createdAt","split","adminName","username","links","link","PROJECTS","description","ConnectedProject","ProjectWithRouter"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport { getProject } from \"../actions\";\nimport { Button } from \"../components\";\nimport { PlaceHolderIcon } from \"../components/Icons/PlaceholderIcon\";\nimport { Links } from \"../components/Links\";\nimport { PARAMS, ROUTES } from \"../constants\";\n\nimport \"./styles/Redico.css\";\n\n\nconst mapStateToProps = state => {\n    return { \n        selectedProject: state.ProjectReducer.selectedProject,\n        selectedUser: state.UserReducer.selectedUser,\n    };\n}\n\nconst VIEW_MODES = {\n    VIEW_3D : \"3d-views\",\n    MEETINGS: \"meetings\",\n    MARKERS: \"markers\"\n}\n\nconst initialState = {\n    viewMode: VIEW_MODES.VIEW_3D,\n};\n\nclass Project extends Component{\n\n    constructor(props) {\n        super(props);\n\n        this.state = initialState;\n    }\n\n    checkViewMode(viewMode) {\n        if (!viewMode) {\n            return VIEW_MODES.VIEW_3D;\n        }\n\n        var valid = false;\n        Object.keys(VIEW_MODES).some(key=>{\n            valid = VIEW_MODES[key] === viewMode;\n            return valid;\n        });\n\n        return valid ? viewMode : VIEW_MODES.VIEW_3D;\n    }\n\n    ProjectSetup() {\n        const { selectedProject, selectedUser } = this.props\n        var { projectId } = this.props.match.params;\n        projectId = parseInt(projectId);\n        \n        if (!selectedProject || selectedProject.id !== projectId) {\n            this.props.dispatch(getProject(projectId))\n        }\n        \n        if (selectedProject && (!selectedUser || selectedUser.id !== selectedProject.MantainerId)) {\n\n            // to-do: get mantainers\n            // this.props.dispatch(getUser(selectedProject.MantainerId))\n        }\n    }\n    \n    componentDidMount() {\n        var { projectView } = this.props.match.params;\n        this.setView(this.checkViewMode(projectView))\n        \n        this.ProjectSetup();\n    }\n\n    componentDidUpdate() {\n        this.ProjectSetup();\n    }\n\n    setView(view){\n        if (view === this.state.viewMode) {\n            return;\n        }\n        var { projectId } = this.props.match.params;\n        var newRoute = ROUTES.PROJECT_PAGE_VIEW;\n        newRoute = newRoute.replace(PARAMS.PROJECT_ID, projectId) \n        newRoute = newRoute.replace(PARAMS.PROJECT_VIEW, view) \n        this.props.history.replace(newRoute);\n        this.setState({...this.state, viewMode: view});\n    }\n\n    renderView(){\n        switch (this.state.viewMode) {\n            case VIEW_MODES.MARKERS:\n                return(<div>Markers</div>);\n            case VIEW_MODES.MEETINGS:\n                return(<div>Meetings</div>);\n            case VIEW_MODES.VIEW_3D:\n            default:\n                return(<div>View 3D</div>);\n        }\n    }\n    \n    render(){\n        const { selectedProject, selectedUser } = this.props\n        const { projectId } = this.props.match.params;\n        const projectName = selectedProject ? selectedProject.name : `Project ${projectId}`;\n        \n        const creationDate = selectedProject ? selectedProject.createdAt?.split('T')[0] : 'yyyy-mm-dd';\n        \n        const adminName = selectedUser?.username\n\n        const links = [\n            {\n                link: ROUTES.PROJECTS,\n                name: 'Projects'\n            },\n            {\n                link: '#',\n                name: projectName\n            },\n        ]\n\n\n        return(\n            <div className='main-content'>\n                <Links links={links} />\n                <div className='project-page'>\n                    <div className='project-header'>\n                        <div className='project-logo'></div>\n                        <div className='project-data'>\n                            <div className='project-name'>\n                                {projectName}\n                            </div>\n                            <div className='project-context'>\n                                <span>\n                                    <b> Created At: </b> {creationDate}\n                                </span>\n                                &nbsp;\n                                <span>\n                                    <b> Admin:  </b> {adminName}\n                                </span>\n                            </div>\n                            <div className='project-description'>\n                                {selectedProject?.description}\n\n                            </div>\n\n                        </div>\n                        <Button className='move-right'>\n                            ...\n                        </Button>\n                    </div>\n                    <div className='project-content'>\n                        <div className='mini-side-panel'>\n                            <Button \n                                    className={`${this.state.viewMode===VIEW_MODES.VIEW_3D?'selected':''}`}\n                                    tooltip='3D Views' \n                                    onClick={()=>{this.setView(VIEW_MODES.VIEW_3D)}}>\n                                <PlaceHolderIcon/>\n                            </Button>\n                            <Button \n                                    className={`${this.state.viewMode===VIEW_MODES.MEETINGS?'selected':''}`}\n                                    tooltip='Meetings' \n                                    onClick={()=>{this.setView(VIEW_MODES.MEETINGS)}}>\n                                <PlaceHolderIcon/>\n                            </Button>\n                            <Button \n                                    className={`${this.state.viewMode===VIEW_MODES.MARKERS?'selected':''}`}\n                                    tooltip='Markers' \n                                    onClick={()=>{this.setView(VIEW_MODES.MARKERS)}}>\n                                <PlaceHolderIcon/>\n                            </Button>\n\n                            <Button className='move-to-bottom' tooltip='back' tooltipPosition='top'>\n                                <b>◂</b> \n                            </Button>\n                        </div>\n                        {this.renderView()}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst ConnectedProject = connect(mapStateToProps)(Project);\n\nconst ProjectWithRouter = withRouter(ConnectedProject);\n\nexport {ProjectWithRouter as Project};"]},"metadata":{},"sourceType":"module"}